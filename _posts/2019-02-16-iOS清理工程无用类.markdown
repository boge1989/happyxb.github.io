---
layout: post
title:  "iOS清理工程无用类"
date:   2019-02-16 
categories: iOS
---


公司项目变动比较大，有很多类已经不需要使用，但是还遗留在工程中，既影响编译速度，也影响项目整合，房子就要及时打扫才能保持干净。

### 找出项目无用类

使用fui工具扫描工程，[fui链接](https://github.com/dblock/fui)
执行命令 `fui find` 等几分钟，如果项目比较大时间会久一点。可以设置忽略一些目录，比如pod目录，三方库目录，以加快扫描速度。

扫描结果直接打印在终端里面，复制到文件里面就可以开始清理工作了。

### 清理文件
文件清理必须特别小心，如果删除了还在使用的类，很可能导致无法预料的bug，少不了被批一顿了。
我讲一下清理的步骤：

1. 先要全局搜索一下这个类是否有调用，fui 工具扫描结果还是比较精准，扫出来的结果要么是没有其他类调用，要么就是调用类中方法并没有实际实用。还有工程中无法搜索到这个类的情况，实际上它已经被从工程中删除，只在文件目录下存在，这种直接把文件删掉就行了。
2. 没有调用方的类也不一定是没有用的，我列举几种情况

	* 通知扩展的文件里配置的类
	* category替换系统方法
	* load方法配置调用的类
	
   一定要看一下文件的log，问问负责的同事是否还有用，确认没用了再删。比较麻烦的是有的同事已经离职，这个只能自己判断了。
   
### 总结
最后清理了一百多个类，删除过程中发现有些类没用了，但是不在fui的扫描结果中，可以考虑换个工具扫描，交叉比对。

清理工作最好开发工程中就做好，不用的类和代码及时清理，保持良好的开发习惯。